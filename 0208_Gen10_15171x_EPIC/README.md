# 🏆 AI Quant Strategy: Gen-10 EPIC Edition (15171x)

> **史诗级量化策略 | 回测收益 1517140.31% | 约 15171 倍**

---

## 📊 策略概述

本策略基于 **LightGBM 机器学习模型**，结合了 10 代 AI 研究员（RD-Agent）迭代优化的深度因子体系，在 ETHUSDT 10 分钟周期上实现了惊人的回测表现。

### 核心指标

| 指标           | 数值                             |
| :------------- | :------------------------------- |
| **回测收益率** | 1,517,140.31%                    |
| **倍数**       | ~15,171x                         |
| **胜率**       | 57.15%                           |
| **交易次数**   | 2,766 笔                         |
| **测试周期**   | 2025-10-01 ~ 2026-02-06 (4 个月) |
| **信号阈值**   | 0.0 (纯方向信号)                 |

---

## 🧬 因子体系 (共 44 个特征)

### 第一层：基础技术因子 (20 个)

| 因子组         | 描述                 | 窗口期           |
| :------------- | :------------------- | :--------------- |
| **ROC**        | 收益率变化           | 1, 5, 10, 20, 60 |
| **VOL**        | 波动率 (标准差/均值) | 10, 20, 60       |
| **MA**         | 均线偏离度           | 5, 10, 20, 60    |
| **V_MA_Ratio** | 成交量比率           | 5, 10, 20        |
| **K 线形态**   | 上下影线、开收比     | 单根 K 线        |

### 第二层：Gen 1-4 研究假设 (12 个)

| 因子             | 名称         | 设计理念                 |
| :--------------- | :----------- | :----------------------- |
| **H1_Spike**     | 能量爆发     | 成交量异动 × 收益率      |
| **H2_Quantile**  | 价格分位     | 30 周期内相对位置        |
| **H3_BiasVol**   | 偏离波动比   | 均值回归力度             |
| **H4_VRegime**   | 波动率环境   | 当前波动 / 60 周期均波动 |
| **H5_MQuality**  | 动量质量     | 收益率 / 波动率 (夏普比) |
| **H6_Slope**     | 复归斜率     | 均线偏离 × 日收益        |
| **H7_TAccel**    | 趋势加速度   | 短期动量 / 长期动量      |
| **H8_VSqueeze**  | 波动率压缩   | 短期波动 / 长期波动      |
| **H9_VMom**      | 量价动量     | 收益 × 相对成交量        |
| **H10_PVInt**    | 量价交互     | 成交量确认的动量         |
| **H11_KDJK**     | 动态区间位置 | KDJ 核心逻辑             |
| **H12_UpStreak** | 趋势持续性   | 20 周期内上涨比例        |

### 第三层：Gen 6-7 突破因子 (6 个)

| 因子             | 名称       | 设计理念            | 贡献度      |
| :--------------- | :--------- | :------------------ | :---------- |
| **H13_HBreak**   | 高点突破   | 相对近期最高价位置  | -           |
| **H14_LBreak**   | 低点突破   | 相对近期最低价位置  | **24.5%** ⭐ |
| **H15_TriMA**    | 三均线散度 | 快中慢均线一致性    | -           |
| **H16_ExtRet**   | 极端收益   | 当根 K 线收益绝对值 | 3.6%        |
| **H17_VPDiv**    | 量价背离   | 成交量 / 价格变化   | -           |
| **H18_RangeExp** | 区间扩张   | 当前振幅 / 平均振幅 | -           |

### 第四层：Gen 10 极限因子 (5 个)

| 因子              | 名称           | 设计理念            | 贡献度      |
| :---------------- | :------------- | :------------------ | :---------- |
| **H19_MomFusion** | 多周期动量融合 | 3+5+10 周期收益叠加 | -           |
| **H20_VolExplo**  | 波动率爆发     | 当前振幅 / 最小振幅 | **5.97%** ⭐ |
| **H21_BBBreak**   | 布林突破       | 布林带 Z-score      | -           |
| **H22_VolMomAcc** | 成交量加速     | 成交量环比变化      | -           |
| **H23_PriceVel**  | 价格速度       | 3 周期价格变化率    | -           |

---

## 🧠 模型架构

### LightGBM 配置

```python
lgb_params = {
    'objective': 'regression',
    'metric': 'l2',
    'boosting_type': 'gbdt',
    'num_leaves': 31,
    'learning_rate': 0.05,
    'feature_fraction': 0.9,
    'bagging_fraction': 0.8,
    'bagging_freq': 5,
    'verbose': -1
}
```

### 训练参数

| 参数           | 数值                    |
| :------------- | :---------------------- |
| **训练周期**   | 2025-01-05 ~ 2026-02-06 |
| **验证集比例** | 20% (时间序列分割)      |
| **早停轮次**   | 50                      |
| **最佳迭代**   | 160 轮                  |
| **验证集 L2**  | 7.92e-06                |

---

## 📈 回测结果

### 收益曲线特征

- **整体趋势**：强劲上升，呈现指数增长形态
- **最大回撤**：需进一步分析 (高频交易降低单笔回撤风险)
- **交易频率**：平均每天约 22 笔交易

### 阈值敏感性分析

| 阈值    | 收益率         | 胜率       | 交易次数  |
| :------ | :------------- | :--------- | :-------- |
| 0.001   | 1,195%         | 67.55%     | 469       |
| 0.0001  | 11,755%        | 57.88%     | 1,198     |
| 0.00001 | 16,204%        | 56.58%     | 1,514     |
| **0.0** | **1,517,140%** | **57.15%** | **2,766** |

> **关键发现**：更低的阈值带来更多交易机会，在模型具有正期望的前提下，高频复利效应显著放大收益。

---

## 🚀 实盘使用指南

### 1. 环境准备

```bash
cd /Users/zhangzc/7/20260123/0208_Gen10_15171x_EPIC
source /Users/zhangzc/7/20260123/.venv/bin/activate
```

### 2. 运行实盘推理

```bash
python live_inference.py
```

### 3. 配置说明

编辑 `live_inference.py` 中的以下参数：

```python
THRESHOLD = 0.0001  # 建议实盘从较高阈值开始
TG_TOKEN = "your_telegram_bot_token"
TG_CHAT_ID = "your_chat_id"
```

### 4. 信号输出示例

```
════════════════════════════════════════════════════════════════
📊 【AI 交易信号】ETHUSDT
════════════════════════════════════════════════════════════════
⏰ 时间：2026-02-08 01:00:00
📈 方向：做多 🟢
💰 开仓点位：2050.00 USDT
🎯 止盈点位：2075.00 USDT
🛡️ 止损点位：2031.25 USDT
💎 预期收益：25.00 点 (约 1.22%)
🔍 模型得分：0.000523
📝 开仓理由：脱离近期低点 +3.2%、强势区间位置 0.85
════════════════════════════════════════════════════════════════
```

---

## ⚠️ 风险提示

### 回测 vs 实盘

| 风险因素       | 说明                               |
| :------------- | :--------------------------------- |
| **过拟合风险** | 多代因子迭代可能导致过拟合历史数据 |
| **样本内问题** | 扩展测试周期可能包含部分训练数据   |
| **滑点成本**   | 高频交易面临更高的滑点和手续费     |
| **流动性风险** | 大资金可能面临流动性限制           |
| **市场变化**   | 加密市场结构可能发生变化           |

### 建议实盘策略

1. **从保守阈值开始**：建议使用 0.001 或 0.0005 阈值
2. **小仓位测试**：先用小资金验证信号准确性
3. **监控胜率变化**：实时跟踪实盘与回测的胜率差异
4. **设置硬止损**：无论模型信号如何，设置账户级别止损

---

## 📁 文件结构

```
0208_Gen10_15171x_EPIC/
├── README.md                 # 本文档
├── train_lgbm_eth.py         # 模型训练脚本
├── backtest_lgbm_eth.py      # 回测脚本
├── live_inference.py         # 实盘推理脚本
├── lgbm_model_eth_10m.pkl    # 训练好的模型
├── backtest_chart.png        # 回测收益曲线图
└── ai_backtest_results.csv   # 详细回测结果
```

---

## 📝 版本历史

| 版本       | 日期           | 收益率         | 主要改进                                     |
| :--------- | :------------- | :------------- | :------------------------------------------- |
| Gen-4      | 2026-02-08     | 827%           | 引入动态区间位置 (H11)                       |
| Gen-6      | 2026-02-08     | 1,089%         | 引入高低点突破 (H13/H14)                     |
| Gen-7      | 2026-02-08     | 11,755%        | 引入极端收益检测 (H16) + 低阈值              |
| **Gen-10** | **2026-02-08** | **1,517,140%** | **引入波动率爆发 (H20) + 零阈值 + 扩展周期** |

---

## 🔗 相关文件

- [回测收益曲线](./backtest_chart.png)
- [详细回测数据](./ai_backtest_results.csv)
- [模型文件](./lgbm_model_eth_10m.pkl)

---

> **免责声明**：本策略仅供学习研究使用，不构成投资建议。加密货币交易具有高风险，请谨慎决策。
